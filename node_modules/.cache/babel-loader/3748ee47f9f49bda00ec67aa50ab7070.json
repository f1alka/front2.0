{"ast":null,"code":"var _jsxFileName = \"/home/f1alka/front_fut/front2.0/src/pages/Profile.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport Header from '../components/Header';\nimport './css/profile.css';\nconst Profile = () => {\n  var _profile$work_type, _profile$contacts;\n  const [profile, setProfile] = useState(null);\n  const [photoUrl, setPhotoUrl] = useState(null);\n  const [workDays, setWorkDays] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchProfile = async () => {\n      setLoading(true);\n      setError(null);\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setError('Нет токена авторизации');\n        setLoading(false);\n        return;\n      }\n      try {\n        const response = await fetch('http://192.168.1.66:8000/auth/profile', {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        });\n        if (!response.ok) {\n          throw new Error(`Ошибка загрузки профиля: ${response.status}`);\n        }\n        const data = await response.json();\n        setProfile(data.user);\n        setWorkDays(data.work_days);\n        const userId = data.user.id;\n        const photoUrl = userId ? `http://192.168.1.66:8000/files/employer/${userId}/get-photo` : null;\n        if (photoUrl) {\n          const photoResponse = await fetch(photoUrl, {\n            method: 'GET',\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n          if (photoResponse.ok) {\n            const photoData = await photoResponse.json();\n            if (photoData.status === 'success' && photoData.file_url) {\n              setPhotoUrl(photoData.file_url.url);\n            }\n          }\n        }\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchProfile();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    title: \"\\u041B\\u0438\\u0447\\u043D\\u044B\\u0439 \\u043A\\u0430\\u0431\\u0438\\u043D\\u0435\\u0442\",\n    subtitle: \"\\u0412\\u0430\\u0448\\u0438 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }), loading ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"loading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\") : error ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, error) : profile ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-photo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: photoUrl || '',\n    alt: \"\\u0424\\u043E\\u0442\\u043E \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"profile-role\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, (_profile$work_type = profile.work_type) === null || _profile$work_type === void 0 ? void 0 : _profile$work_type.toUpperCase()), /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"profile-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, profile.fio), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"profile-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, profile.description), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 18\n    }\n  }, \"Email:\"), \" \", profile.email), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 18\n    }\n  }, \"\\u041A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u044B:\"), \" \", ((_profile$contacts = profile.contacts) === null || _profile$contacts === void 0 ? void 0 : _profile$contacts.join(', ')) || 'Нет данных'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"work-status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, new Date().toLocaleDateString()), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"status-badge\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, workDays.length > 0 && workDays[0].status === 1 ? 'работает' : 'отсутствует'))) : /*#__PURE__*/React.createElement(\"p\", {\n    className: \"no-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, \"\\u041D\\u0435\\u0442 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445\"));\n};\nexport default Profile;","map":{"version":3,"names":["React","useEffect","useState","Header","Profile","_profile$work_type","_profile$contacts","profile","setProfile","photoUrl","setPhotoUrl","workDays","setWorkDays","loading","setLoading","error","setError","fetchProfile","token","localStorage","getItem","response","fetch","method","headers","ok","Error","status","data","json","user","work_days","userId","id","photoResponse","photoData","file_url","url","err","message","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","title","subtitle","src","alt","work_type","toUpperCase","fio","description","email","contacts","join","Date","toLocaleDateString","length"],"sources":["/home/f1alka/front_fut/front2.0/src/pages/Profile.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Header from '../components/Header';\nimport './css/profile.css';\n\nconst Profile = () => {\n  const [profile, setProfile] = useState(null);\n  const [photoUrl, setPhotoUrl] = useState(null);\n  const [workDays, setWorkDays] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchProfile = async () => {\n      setLoading(true);\n      setError(null);\n\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setError('Нет токена авторизации');\n        setLoading(false);\n        return;\n      }\n\n      try {\n        const response = await fetch('http://192.168.1.66:8000/auth/profile', {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json',\n          },\n        });\n\n        if (!response.ok) {\n          throw new Error(`Ошибка загрузки профиля: ${response.status}`);\n        }\n\n        const data = await response.json();\n        setProfile(data.user);\n        setWorkDays(data.work_days);\n\n        const userId = data.user.id;\n        const photoUrl = userId ? `http://192.168.1.66:8000/files/employer/${userId}/get-photo` : null;\n\n        if (photoUrl) {\n          const photoResponse = await fetch(photoUrl, {\n            method: 'GET',\n            headers: { 'Authorization': `Bearer ${token}` },\n          });\n\n          if (photoResponse.ok) {\n            const photoData = await photoResponse.json();\n            if (photoData.status === 'success' && photoData.file_url) {\n              setPhotoUrl(photoData.file_url.url);\n            }\n          }\n        }\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchProfile();\n  }, []);\n\n  return (\n    <div className=\"container\">\n      <Header title=\"Личный кабинет\" subtitle=\"Ваши данные\" />\n      \n      {loading ? (\n        <p className=\"loading\">Загрузка...</p>\n      ) : error ? (\n        <p className=\"error\">{error}</p>\n      ) : profile ? (\n        <div className=\"profile-card\">\n          <div className=\"profile-photo\">\n            <img src={photoUrl || ''} alt=\"Фото пользователя\" />\n          </div>\n          <div className=\"profile-info\">\n            <p className=\"profile-role\">{profile.work_type?.toUpperCase()}</p>\n            <h1 className=\"profile-name\">{profile.fio}</h1>\n            <p className=\"profile-description\">{profile.description}</p>\n\n            <div className=\"profile-details\">\n              <p><strong>Email:</strong> {profile.email}</p>\n              <p><strong>Контакты:</strong> {profile.contacts?.join(', ') || 'Нет данных'}</p>\n            </div>\n          </div>\n\n          <div className=\"work-status\">\n            <p>{new Date().toLocaleDateString()}</p>\n            <span className=\"status-badge\">{workDays.length > 0 && workDays[0].status === 1 ? 'работает' : 'отсутствует'}</span>\n          </div>\n        </div>\n      ) : (\n        <p className=\"no-data\">Нет данных</p>\n      )}\n    </div>\n  );\n};\n\nexport default Profile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}