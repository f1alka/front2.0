{"ast":null,"code":"/* import React, { useState, useEffect } from 'react';\nimport Header from '../components/Header';\nimport Sidebar from '../components/Sidebar';\nimport SearchBar from '../components/SearchBar';\nimport './css/card_res.css'; // Можно добавить стили для карточек\n\nconst Regular = () => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [tableData, setTableData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [page, setPage] = useState(1);\n  const limit = 10; // Убрали setLimit\n\n  useEffect(() => {\n    const fetchResidents = async () => {\n      try {\n        console.log(`Fetching data: page=${page}&limit=${limit}`);\n        const response = await fetch(`http://172.20.10.2:8000/residents/get_list_residents?page=${page}&limit=${limit}`);\n\n        if (!response.ok) throw new Error(`Ошибка: ${response.statusText}`);\n\n        const data = await response.json();\n        console.log('Data received:', data);\n\n        const residentsWithPhotos = await Promise.all(\n          data.map(async (resident) => {\n            const photoUrl = await fetchPhotoUrl(resident.id);\n            return { ...resident, photoUrl };\n          })\n        );\n\n        setTableData(residentsWithPhotos);\n      } catch (err) {\n        console.error('Error fetching data:', err);\n        setError(`Ошибка запроса: ${err.message}`);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchResidents();\n  }, [page, limit]); // Добавили limit\n\n  const filteredData = tableData.filter(row =>\n    row.fio.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const fetchPhotoUrl = async (id) => {\n    try {\n      const response = await fetch(`http://172.20.10.2:8000/files/residents/${id}/get-photo`);\n      if (!response.ok) throw new Error(`Ошибка: ${response.statusText}`);\n\n      const photoData = await response.json();\n      return photoData.status === 'success' && photoData.file_url ? photoData.file_url.url : null;\n    } catch (err) {\n      console.error('Error fetching photo:', err);\n      return null;\n    }\n  };\n\n  if (loading) return <p>Загрузка...</p>;\n  if (error) return <p>Ошибка: {error}</p>;\n\n  return (\n    <div className=\"container\">\n      <Sidebar />\n      <div className=\"main-content\">\n        <Header title=\"HookahPlace Futura\" subtitle=\"Список постоянных клиентов\" />\n        <section className=\"content\">\n          <h2>Список постоянных клиентов</h2>\n\n          <div className=\"search-container\">\n            <SearchBar onSearch={setSearchTerm} />\n          </div>\n\n          <div className=\"card-container\">\n            {filteredData.map((row, index) => (\n              <div key={index} className=\"card\">\n                <div className=\"card-photo\">\n                  <img \n                    src={row.photoUrl || 'default-photo-url.jpg'} \n                    alt={`Фото ${row.fio}`} \n                    className=\"resident-photo\" \n                  />\n                </div>\n                <div className=\"card-info\">\n                  <h3>{row.fio}</h3>\n                  <p>Скидка: {row.discount_value}%</p>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          <div className=\"pagination\">\n            <button onClick={() => setPage(prev => Math.max(prev - 1, 1))} disabled={page <= 1}>\n              Назад\n            </button>\n            <button onClick={() => setPage(prev => prev + 1)}>\n              Вперед\n            </button>\n          </div>\n        </section>\n      </div>\n    </div>\n  );\n};\n\nexport default Regular;\n*/\n\n/*import React, { useState } from 'react';\nimport Modal from 'react-modal'\nimport './css/regular.css'\n\nModal.setAppElement('#root')\n\nconst locations = [\n  { \n    id: 1, \n    name: 'Арбат',\n    image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800'\n  },\n  { \n    id: 2, \n    name: 'Проспект мира',\n    image: 'https://images.unsplash.com/photo-1537047902294-62a40c20a6ae?w=800'\n  },\n  { \n    id: 3, \n    name: 'Никольская',\n    image: 'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=800'\n  }\n]\n\nconst regularCustomers = [\n  {\n    id: 1,\n    name: 'Иван Петров',\n    location: 'Арбат',\n    image: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=500',\n    favorites: 'Любит заказывать стейк medium rare и красное вино'\n  },\n  {\n    id: 2,\n    name: 'Мария Иванова',\n    location: 'Проспект мира',\n    image: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=500',\n    favorites: 'Предпочитает пасту карбонара и белое вино'\n  },\n  // Add more customers as needed\n]\n\nfunction App() {\n  const [selectedLocation, setSelectedLocation] = useState(null)\n  const [searchTerm, setSearchTerm] = useState('')\n  const [selectedRegular, setSelectedRegular] = useState(null)\n  const [modalIsOpen, setModalIsOpen] = useState(false)\n\n  if (!selectedLocation) {\n    return (\n      <div className=\"location-select\">\n        <h1 className=\"location-title\">Выберите локацию</h1>\n        <div className=\"location-grid\">\n          {locations.map(location => (\n            <div\n              key={location.id}\n              className=\"location-card\"\n              onClick={() => setSelectedLocation(location.name)}\n            >\n              <div \n                className=\"location-image\" \n                style={{ backgroundImage: `url(${location.image})` }}\n              />\n              <h2 className=\"location-name\">{location.name}</h2>\n            </div>\n          ))}\n        </div>\n      </div>\n    )\n  }\n\n  const filteredRegulars = regularCustomers.filter(regular =>\n    regular.name.toLowerCase().includes(searchTerm.toLowerCase()) &&\n    (selectedLocation === 'all' || regular.location === selectedLocation)\n  )\n\n  return (\n    <div className={`regulars-page ${modalIsOpen ? 'blur-background' : ''}`}>\n      <div className=\"search-bar\">\n        <input\n          type=\"text\"\n          placeholder=\"Поиск по имени...\"\n          className=\"search-input\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n        />\n        <select\n          className=\"location-filter\"\n          value={selectedLocation}\n          onChange={(e) => setSelectedLocation(e.target.value)}\n        >\n          <option value=\"all\">Все локации</option>\n          {locations.map(location => (\n            <option key={location.id} value={location.name}>\n              {location.name}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"regulars-grid\">\n        {filteredRegulars.map(regular => (\n          <div\n            key={regular.id}\n            className=\"regular-card\"\n            onClick={() => {\n              setSelectedRegular(regular)\n              setModalIsOpen(true)\n            }}\n          >\n            <img src={regular.image} alt={regular.name} className=\"regular-image\" />\n            <div className=\"regular-info\">\n              <h3 className=\"regular-name\">{regular.name}</h3>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      <Modal\n        isOpen={modalIsOpen}\n        onRequestClose={() => setModalIsOpen(false)}\n        className=\"modal-content\"\n        overlayClassName=\"ReactModal__Overlay\"\n      >\n        {selectedRegular && (\n          <>\n            <div className=\"modal-header\">\n              <h2>{selectedRegular.name}</h2>\n              <button\n                className=\"close-button\"\n                onClick={() => setModalIsOpen(false)}\n              >\n                ×\n              </button>\n            </div>\n            <img\n              src={selectedRegular.image}\n              alt={selectedRegular.name}\n              className=\"modal-image\"\n            />\n            <div className=\"modal-details\">\n              <p><strong>Локация:</strong> {selectedRegular.location}</p>\n              <p><strong>Предпочтения:</strong> {selectedRegular.favorites}</p>\n            </div>\n          </>\n        )}\n      </Modal>\n    </div>\n  )\n}\n\nexport default App;\n\n*/","map":{"version":3,"names":[],"sources":["/home/f1alka/front_fut/front2.0/src/pages/Regular.jsx"],"sourcesContent":["/* import React, { useState, useEffect } from 'react';\nimport Header from '../components/Header';\nimport Sidebar from '../components/Sidebar';\nimport SearchBar from '../components/SearchBar';\nimport './css/card_res.css'; // Можно добавить стили для карточек\n\nconst Regular = () => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [tableData, setTableData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [page, setPage] = useState(1);\n  const limit = 10; // Убрали setLimit\n\n  useEffect(() => {\n    const fetchResidents = async () => {\n      try {\n        console.log(`Fetching data: page=${page}&limit=${limit}`);\n        const response = await fetch(`http://172.20.10.2:8000/residents/get_list_residents?page=${page}&limit=${limit}`);\n\n        if (!response.ok) throw new Error(`Ошибка: ${response.statusText}`);\n\n        const data = await response.json();\n        console.log('Data received:', data);\n\n        const residentsWithPhotos = await Promise.all(\n          data.map(async (resident) => {\n            const photoUrl = await fetchPhotoUrl(resident.id);\n            return { ...resident, photoUrl };\n          })\n        );\n\n        setTableData(residentsWithPhotos);\n      } catch (err) {\n        console.error('Error fetching data:', err);\n        setError(`Ошибка запроса: ${err.message}`);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchResidents();\n  }, [page, limit]); // Добавили limit\n\n  const filteredData = tableData.filter(row =>\n    row.fio.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const fetchPhotoUrl = async (id) => {\n    try {\n      const response = await fetch(`http://172.20.10.2:8000/files/residents/${id}/get-photo`);\n      if (!response.ok) throw new Error(`Ошибка: ${response.statusText}`);\n\n      const photoData = await response.json();\n      return photoData.status === 'success' && photoData.file_url ? photoData.file_url.url : null;\n    } catch (err) {\n      console.error('Error fetching photo:', err);\n      return null;\n    }\n  };\n\n  if (loading) return <p>Загрузка...</p>;\n  if (error) return <p>Ошибка: {error}</p>;\n\n  return (\n    <div className=\"container\">\n      <Sidebar />\n      <div className=\"main-content\">\n        <Header title=\"HookahPlace Futura\" subtitle=\"Список постоянных клиентов\" />\n        <section className=\"content\">\n          <h2>Список постоянных клиентов</h2>\n\n          <div className=\"search-container\">\n            <SearchBar onSearch={setSearchTerm} />\n          </div>\n\n          <div className=\"card-container\">\n            {filteredData.map((row, index) => (\n              <div key={index} className=\"card\">\n                <div className=\"card-photo\">\n                  <img \n                    src={row.photoUrl || 'default-photo-url.jpg'} \n                    alt={`Фото ${row.fio}`} \n                    className=\"resident-photo\" \n                  />\n                </div>\n                <div className=\"card-info\">\n                  <h3>{row.fio}</h3>\n                  <p>Скидка: {row.discount_value}%</p>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          <div className=\"pagination\">\n            <button onClick={() => setPage(prev => Math.max(prev - 1, 1))} disabled={page <= 1}>\n              Назад\n            </button>\n            <button onClick={() => setPage(prev => prev + 1)}>\n              Вперед\n            </button>\n          </div>\n        </section>\n      </div>\n    </div>\n  );\n};\n\nexport default Regular;\n*/\n\n\n/*import React, { useState } from 'react';\nimport Modal from 'react-modal'\nimport './css/regular.css'\n\nModal.setAppElement('#root')\n\nconst locations = [\n  { \n    id: 1, \n    name: 'Арбат',\n    image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800'\n  },\n  { \n    id: 2, \n    name: 'Проспект мира',\n    image: 'https://images.unsplash.com/photo-1537047902294-62a40c20a6ae?w=800'\n  },\n  { \n    id: 3, \n    name: 'Никольская',\n    image: 'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=800'\n  }\n]\n\nconst regularCustomers = [\n  {\n    id: 1,\n    name: 'Иван Петров',\n    location: 'Арбат',\n    image: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=500',\n    favorites: 'Любит заказывать стейк medium rare и красное вино'\n  },\n  {\n    id: 2,\n    name: 'Мария Иванова',\n    location: 'Проспект мира',\n    image: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=500',\n    favorites: 'Предпочитает пасту карбонара и белое вино'\n  },\n  // Add more customers as needed\n]\n\nfunction App() {\n  const [selectedLocation, setSelectedLocation] = useState(null)\n  const [searchTerm, setSearchTerm] = useState('')\n  const [selectedRegular, setSelectedRegular] = useState(null)\n  const [modalIsOpen, setModalIsOpen] = useState(false)\n\n  if (!selectedLocation) {\n    return (\n      <div className=\"location-select\">\n        <h1 className=\"location-title\">Выберите локацию</h1>\n        <div className=\"location-grid\">\n          {locations.map(location => (\n            <div\n              key={location.id}\n              className=\"location-card\"\n              onClick={() => setSelectedLocation(location.name)}\n            >\n              <div \n                className=\"location-image\" \n                style={{ backgroundImage: `url(${location.image})` }}\n              />\n              <h2 className=\"location-name\">{location.name}</h2>\n            </div>\n          ))}\n        </div>\n      </div>\n    )\n  }\n\n  const filteredRegulars = regularCustomers.filter(regular =>\n    regular.name.toLowerCase().includes(searchTerm.toLowerCase()) &&\n    (selectedLocation === 'all' || regular.location === selectedLocation)\n  )\n\n  return (\n    <div className={`regulars-page ${modalIsOpen ? 'blur-background' : ''}`}>\n      <div className=\"search-bar\">\n        <input\n          type=\"text\"\n          placeholder=\"Поиск по имени...\"\n          className=\"search-input\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n        />\n        <select\n          className=\"location-filter\"\n          value={selectedLocation}\n          onChange={(e) => setSelectedLocation(e.target.value)}\n        >\n          <option value=\"all\">Все локации</option>\n          {locations.map(location => (\n            <option key={location.id} value={location.name}>\n              {location.name}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"regulars-grid\">\n        {filteredRegulars.map(regular => (\n          <div\n            key={regular.id}\n            className=\"regular-card\"\n            onClick={() => {\n              setSelectedRegular(regular)\n              setModalIsOpen(true)\n            }}\n          >\n            <img src={regular.image} alt={regular.name} className=\"regular-image\" />\n            <div className=\"regular-info\">\n              <h3 className=\"regular-name\">{regular.name}</h3>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      <Modal\n        isOpen={modalIsOpen}\n        onRequestClose={() => setModalIsOpen(false)}\n        className=\"modal-content\"\n        overlayClassName=\"ReactModal__Overlay\"\n      >\n        {selectedRegular && (\n          <>\n            <div className=\"modal-header\">\n              <h2>{selectedRegular.name}</h2>\n              <button\n                className=\"close-button\"\n                onClick={() => setModalIsOpen(false)}\n              >\n                ×\n              </button>\n            </div>\n            <img\n              src={selectedRegular.image}\n              alt={selectedRegular.name}\n              className=\"modal-image\"\n            />\n            <div className=\"modal-details\">\n              <p><strong>Локация:</strong> {selectedRegular.location}</p>\n              <p><strong>Предпочтения:</strong> {selectedRegular.favorites}</p>\n            </div>\n          </>\n        )}\n      </Modal>\n    </div>\n  )\n}\n\nexport default App;\n\n*/"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module"}