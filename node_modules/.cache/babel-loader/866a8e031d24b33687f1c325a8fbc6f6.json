{"ast":null,"code":"/* import { useState, useEffect } from 'react';\nimport './css/table.css';\nimport React from 'react';\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    console.log(\"Ошибка в компоненте:\", error);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <h1>Что-то пошло не так...</h1>;\n    }\n    return this.props.children;\n  }\n}\n\nfunction App() {\n  const [workdays, setWorkdays] = useState([]);  // Данные о рабочих днях\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalItems, setTotalItems] = useState(0);  // Общее количество рабочих дней\n  const [searchName, setSearchName] = useState('');\n  const [selectedDate, setSelectedDate] = useState('');\n  const itemsPerPage = 10;\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch(`http://172.20.10.2:8000/workdays/get_list_workdays?page=${currentPage}&limit=${itemsPerPage}`);\n        const data = await response.json();\n\n        // Проверка структуры данных и обновление состояний\n        if (data && Array.isArray(data)) {\n          setWorkdays(data);  // Данные о рабочих днях\n          setTotalItems(data.length);  // Общее количество\n        }\n      } catch (error) {\n        console.error('Ошибка при загрузке данных:', error);\n      }\n    };\n\n    fetchData();\n  }, [currentPage]);\n\n  const filteredWorkdays = workdays.filter(workday => {\n    const nameMatch = workday.employer_fio.toLowerCase().includes(searchName.toLowerCase());\n    const dateMatch = !selectedDate || workday.work_time.startsWith(selectedDate);\n    return nameMatch && dateMatch;\n  });\n\n  const indexOfLastItem = currentPage * itemsPerPage;\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\n  const currentWorkdays = filteredWorkdays.slice(indexOfFirstItem, indexOfLastItem);\n  const totalPages = Math.ceil(totalItems / itemsPerPage);\n\n  const getStatusText = (status) => {\n    switch (status) {\n      case 0: return 'работает';\n      case 1: return 'не начал';\n      case 2: return 'не пришел';\n      default: return '';\n    }\n  };\n\n  const getStatusClass = (status) => {\n    switch (status) {\n      case 0: return 'status-working';\n      case 1: return 'status-not-started';\n      case 2: return 'status-absent';\n      default: return '';\n    }\n  };\n\n  const getPageNumbers = () => {\n    const pageNumbers = [];\n    const maxVisiblePages = 5;\n    \n    if (totalPages <= maxVisiblePages) {\n      for (let i = 1; i <= totalPages; i++) {\n        pageNumbers.push(i);\n      }\n    } else {\n      pageNumbers.push(1);\n      \n      if (currentPage > 3) {\n        pageNumbers.push('...');\n      }\n      \n      for (let i = Math.max(2, currentPage - 1); i <= Math.min(totalPages - 1, currentPage + 1); i++) {\n        pageNumbers.push(i);\n      }\n      \n      if (currentPage < totalPages - 2) {\n        pageNumbers.push('...');\n      }\n      \n      pageNumbers.push(totalPages);\n    }\n    \n    return pageNumbers;\n  };\n\n  return (\n    <ErrorBoundary>\n      <div className=\"schedule-container\">\n        <div className=\"header\">\n          <h1>Расписание сотрудников</h1>\n          <p>Управление расписанием и статусами сотрудников</p>\n        </div>\n\n        <div className=\"filters\">\n          <div className=\"filters-grid\">\n            <div className=\"filter-group\">\n              <label>Поиск по ФИО</label>\n              <input\n                type=\"text\"\n                value={searchName}\n                onChange={(e) => setSearchName(e.target.value)}\n                placeholder=\"Введите ФИО сотрудника\"\n              />\n            </div>\n            \n            <div className=\"filter-group\">\n              <label>Фильтр по дате</label>\n              <input\n                type=\"date\"\n                value={selectedDate}\n                onChange={(e) => setSelectedDate(e.target.value)}\n              />\n            </div>\n          </div>\n        </div>\n\n        {filteredWorkdays.length === 0 ? (\n          <div className=\"no-data\">Нет данных для отображения</div>\n        ) : (\n          <div className=\"employees-grid\">\n            {currentWorkdays.map(workday => (\n              <div key={workday.id} className=\"employee-card\">\n                <div className=\"card-content\">\n                  <h3 className=\"employee-name\">{workday.employer_fio}</h3>\n                  <p className=\"employee-date\">{new Date(workday.work_time).toLocaleDateString()}</p>\n                  <span className={`status-badge ${getStatusClass(workday.status)}`}>\n                    {getStatusText(workday.status)}\n                  </span>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {totalPages > 1 && (\n          <div className=\"pagination\">\n            <button\n              onClick={() => setCurrentPage(prev => Math.max(prev - 1, 1))}\n              disabled={currentPage === 1}\n            >\n              ←\n            </button>\n            \n            {getPageNumbers().map((pageNum, index) => (\n              pageNum === '...' ? (\n                <span key={`ellipsis-${index}`} className=\"ellipsis\">\n                  ...\n                </span>\n              ) : (\n                <button\n                  key={pageNum}\n                  onClick={() => setCurrentPage(pageNum)}\n                  className={currentPage === pageNum ? 'active' : ''}\n                >\n                  {pageNum}\n                </button>\n              )\n            ))}\n            \n            <button\n              onClick={() => setCurrentPage(prev => Math.min(prev + 1, totalPages))}\n              disabled={currentPage === totalPages}\n            >\n              →\n            </button>\n          </div>\n        )}\n\n        <div className=\"results-counter\">\n          Показано {indexOfFirstItem + 1}-{Math.min(indexOfLastItem, filteredWorkdays.length)} из {totalItems} сотрудников\n        </div>\n      </div>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;\n*/","map":{"version":3,"names":[],"sources":["/home/f1alka/front_fut/front2.0/src/pages/Table.jsx"],"sourcesContent":["/* import { useState, useEffect } from 'react';\nimport './css/table.css';\nimport React from 'react';\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    console.log(\"Ошибка в компоненте:\", error);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <h1>Что-то пошло не так...</h1>;\n    }\n    return this.props.children;\n  }\n}\n\nfunction App() {\n  const [workdays, setWorkdays] = useState([]);  // Данные о рабочих днях\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalItems, setTotalItems] = useState(0);  // Общее количество рабочих дней\n  const [searchName, setSearchName] = useState('');\n  const [selectedDate, setSelectedDate] = useState('');\n  const itemsPerPage = 10;\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch(`http://172.20.10.2:8000/workdays/get_list_workdays?page=${currentPage}&limit=${itemsPerPage}`);\n        const data = await response.json();\n\n        // Проверка структуры данных и обновление состояний\n        if (data && Array.isArray(data)) {\n          setWorkdays(data);  // Данные о рабочих днях\n          setTotalItems(data.length);  // Общее количество\n        }\n      } catch (error) {\n        console.error('Ошибка при загрузке данных:', error);\n      }\n    };\n\n    fetchData();\n  }, [currentPage]);\n\n  const filteredWorkdays = workdays.filter(workday => {\n    const nameMatch = workday.employer_fio.toLowerCase().includes(searchName.toLowerCase());\n    const dateMatch = !selectedDate || workday.work_time.startsWith(selectedDate);\n    return nameMatch && dateMatch;\n  });\n\n  const indexOfLastItem = currentPage * itemsPerPage;\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\n  const currentWorkdays = filteredWorkdays.slice(indexOfFirstItem, indexOfLastItem);\n  const totalPages = Math.ceil(totalItems / itemsPerPage);\n\n  const getStatusText = (status) => {\n    switch (status) {\n      case 0: return 'работает';\n      case 1: return 'не начал';\n      case 2: return 'не пришел';\n      default: return '';\n    }\n  };\n\n  const getStatusClass = (status) => {\n    switch (status) {\n      case 0: return 'status-working';\n      case 1: return 'status-not-started';\n      case 2: return 'status-absent';\n      default: return '';\n    }\n  };\n\n  const getPageNumbers = () => {\n    const pageNumbers = [];\n    const maxVisiblePages = 5;\n    \n    if (totalPages <= maxVisiblePages) {\n      for (let i = 1; i <= totalPages; i++) {\n        pageNumbers.push(i);\n      }\n    } else {\n      pageNumbers.push(1);\n      \n      if (currentPage > 3) {\n        pageNumbers.push('...');\n      }\n      \n      for (let i = Math.max(2, currentPage - 1); i <= Math.min(totalPages - 1, currentPage + 1); i++) {\n        pageNumbers.push(i);\n      }\n      \n      if (currentPage < totalPages - 2) {\n        pageNumbers.push('...');\n      }\n      \n      pageNumbers.push(totalPages);\n    }\n    \n    return pageNumbers;\n  };\n\n  return (\n    <ErrorBoundary>\n      <div className=\"schedule-container\">\n        <div className=\"header\">\n          <h1>Расписание сотрудников</h1>\n          <p>Управление расписанием и статусами сотрудников</p>\n        </div>\n\n        <div className=\"filters\">\n          <div className=\"filters-grid\">\n            <div className=\"filter-group\">\n              <label>Поиск по ФИО</label>\n              <input\n                type=\"text\"\n                value={searchName}\n                onChange={(e) => setSearchName(e.target.value)}\n                placeholder=\"Введите ФИО сотрудника\"\n              />\n            </div>\n            \n            <div className=\"filter-group\">\n              <label>Фильтр по дате</label>\n              <input\n                type=\"date\"\n                value={selectedDate}\n                onChange={(e) => setSelectedDate(e.target.value)}\n              />\n            </div>\n          </div>\n        </div>\n\n        {filteredWorkdays.length === 0 ? (\n          <div className=\"no-data\">Нет данных для отображения</div>\n        ) : (\n          <div className=\"employees-grid\">\n            {currentWorkdays.map(workday => (\n              <div key={workday.id} className=\"employee-card\">\n                <div className=\"card-content\">\n                  <h3 className=\"employee-name\">{workday.employer_fio}</h3>\n                  <p className=\"employee-date\">{new Date(workday.work_time).toLocaleDateString()}</p>\n                  <span className={`status-badge ${getStatusClass(workday.status)}`}>\n                    {getStatusText(workday.status)}\n                  </span>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {totalPages > 1 && (\n          <div className=\"pagination\">\n            <button\n              onClick={() => setCurrentPage(prev => Math.max(prev - 1, 1))}\n              disabled={currentPage === 1}\n            >\n              ←\n            </button>\n            \n            {getPageNumbers().map((pageNum, index) => (\n              pageNum === '...' ? (\n                <span key={`ellipsis-${index}`} className=\"ellipsis\">\n                  ...\n                </span>\n              ) : (\n                <button\n                  key={pageNum}\n                  onClick={() => setCurrentPage(pageNum)}\n                  className={currentPage === pageNum ? 'active' : ''}\n                >\n                  {pageNum}\n                </button>\n              )\n            ))}\n            \n            <button\n              onClick={() => setCurrentPage(prev => Math.min(prev + 1, totalPages))}\n              disabled={currentPage === totalPages}\n            >\n              →\n            </button>\n          </div>\n        )}\n\n        <div className=\"results-counter\">\n          Показано {indexOfFirstItem + 1}-{Math.min(indexOfLastItem, filteredWorkdays.length)} из {totalItems} сотрудников\n        </div>\n      </div>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;\n*/"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module"}